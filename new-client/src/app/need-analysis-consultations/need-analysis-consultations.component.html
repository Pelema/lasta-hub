<div class="need-analysis-consultations">
  <div class="header">
    <h2>Consultations</h2>
    @if (!consultations.complete) {
      <app-button [props]="ButtonProps" (click)="onStartOrCompleteClick()"/>
    }
  </div>
  <div class="current-status">
    @if (!consultations) {
      <p class="not-started">Consultations have not yet began</p>
    } @else {
      <div class="date-item">
        <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M23.75 5H22.5V3.75C22.5 3.0625 21.9375 2.5 21.25 2.5C20.5625 2.5 20 3.0625 20 3.75V5H10V3.75C10 3.0625 9.4375 2.5 8.75 2.5C8.0625 2.5 7.5 3.0625 7.5 3.75V5H6.25C4.8625 5 3.7625 6.125 3.7625 7.5L3.75 25C3.75 25.663 4.01339 26.2989 4.48223 26.7678C4.95107 27.2366 5.58696 27.5 6.25 27.5H23.75C25.125 27.5 26.25 26.375 26.25 25V7.5C26.25 6.125 25.125 5 23.75 5ZM23.75 23.75C23.75 24.4375 23.1875 25 22.5 25H7.5C6.8125 25 6.25 24.4375 6.25 23.75V11.25H23.75V23.75ZM8.75 13.75H11.25V16.25H8.75V13.75ZM13.75 13.75H16.25V16.25H13.75V13.75ZM18.75 13.75H21.25V16.25H18.75V13.75Z"
            fill="#0F2139"/>
        </svg>

        <p>Started: {{ consultations.startDate }}</p>
      </div>

      <div class="date-item">
        <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M23.75 5H22.5V3.75C22.5 3.0625 21.9375 2.5 21.25 2.5C20.5625 2.5 20 3.0625 20 3.75V5H10V3.75C10 3.0625 9.4375 2.5 8.75 2.5C8.0625 2.5 7.5 3.0625 7.5 3.75V5H6.25C4.8625 5 3.7625 6.125 3.7625 7.5L3.75 25C3.75 25.663 4.01339 26.2989 4.48223 26.7678C4.95107 27.2366 5.58696 27.5 6.25 27.5H23.75C25.125 27.5 26.25 26.375 26.25 25V7.5C26.25 6.125 25.125 5 23.75 5ZM23.75 23.75C23.75 24.4375 23.1875 25 22.5 25H7.5C6.8125 25 6.25 24.4375 6.25 23.75V11.25H23.75V23.75ZM8.75 13.75H11.25V16.25H8.75V13.75ZM13.75 13.75H16.25V16.25H13.75V13.75ZM18.75 13.75H21.25V16.25H18.75V13.75Z"
            fill="#0F2139"/>
        </svg>

        <p>Ended: {{ consultations.endDate ? consultations.endDate : 'Not Yet Concluded' }}</p>
      </div>

    }


  </div>

  @if (consultations) {
    <div class="stakeholders">
      <div class="header">
        <h3>Stakeholders</h3>
        <app-button [props]="AddButton" routerLink="/need-analysis/consultations/add-stakeholder"/>
      </div>
      @if (!consultations.stakeholders) {
        <p>No stakeholders</p>
      } @else {
        <div class="all-stakeholders">
          <div *ngFor="let stakeholder of consultations.stakeholders" class="stakeholder shadow">
            <div class="header">
              <p class="name">{{ stakeholder.name }}</p>
              <div class="actions">
                <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M8.66669 3.33325H5.33335C4.89133 3.33325 4.4674 3.50885 4.15484 3.82141C3.84228 4.13397 3.66669 4.55789 3.66669 4.99992V14.9999C3.66669 15.4419 3.84228 15.8659 4.15484 16.1784C4.4674 16.491 4.89133 16.6666 5.33335 16.6666H15.3334C15.7754 16.6666 16.1993 16.491 16.5119 16.1784C16.8244 15.8659 17 15.4419 17 14.9999V11.6666M10.3334 9.99992L17 3.33325M17 3.33325V7.49992M17 3.33325H12.8334"
                    stroke="#0F2139" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M12.2534 4.03672L14.63 6.41339M6.16671 5.83339H3.66671C3.44569 5.83339 3.23373 5.92119 3.07745 6.07747C2.92117 6.23375 2.83337 6.44571 2.83337 6.66672V15.0001C2.83337 15.2211 2.92117 15.433 3.07745 15.5893C3.23373 15.7456 3.44569 15.8334 3.66671 15.8334H12.8334C13.0544 15.8334 13.2663 15.7456 13.4226 15.5893C13.5789 15.433 13.6667 15.2211 13.6667 15.0001V11.2501M15.6742 2.99172C15.8304 3.14781 15.9542 3.33313 16.0387 3.5371C16.1232 3.74107 16.1667 3.95969 16.1667 4.18047C16.1667 4.40126 16.1232 4.61988 16.0387 4.82384C15.9542 5.02781 15.8304 5.21313 15.6742 5.36922L9.97087 11.0726L7.00004 11.6667L7.59421 8.69589L13.2975 2.99256C13.4535 2.83634 13.6387 2.7124 13.8426 2.62784C14.0465 2.54328 14.2651 2.49976 14.4859 2.49976C14.7066 2.49976 14.9252 2.54328 15.1291 2.62784C15.333 2.7124 15.5182 2.83634 15.6742 2.99256V2.99172Z"
                    stroke="#0F2139" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M8.77087 4.0625V4.375H11.8959V4.0625C11.8959 3.6481 11.7313 3.25067 11.4382 2.95765C11.1452 2.66462 10.7478 2.5 10.3334 2.5C9.91897 2.5 9.52155 2.66462 9.22852 2.95765C8.93549 3.25067 8.77087 3.6481 8.77087 4.0625ZM7.52087 4.375V4.0625C7.52087 3.31658 7.81719 2.60121 8.34464 2.07376C8.87208 1.54632 9.58745 1.25 10.3334 1.25C11.0793 1.25 11.7947 1.54632 12.3221 2.07376C12.8496 2.60121 13.1459 3.31658 13.1459 4.0625V4.375H17.8334C17.9991 4.375 18.1581 4.44085 18.2753 4.55806C18.3925 4.67527 18.4584 4.83424 18.4584 5C18.4584 5.16576 18.3925 5.32473 18.2753 5.44194C18.1581 5.55915 17.9991 5.625 17.8334 5.625H16.8909L15.7084 15.98C15.6212 16.7426 15.2564 17.4465 14.6835 17.9573C14.1106 18.4682 13.3697 18.7504 12.6021 18.75H8.06462C7.29704 18.7504 6.55617 18.4682 5.98328 17.9573C5.4104 17.4465 5.04557 16.7426 4.95837 15.98L3.77587 5.625H2.83337C2.66761 5.625 2.50864 5.55915 2.39143 5.44194C2.27422 5.32473 2.20837 5.16576 2.20837 5C2.20837 4.83424 2.27422 4.67527 2.39143 4.55806C2.50864 4.44085 2.66761 4.375 2.83337 4.375H7.52087ZM6.20087 15.8375C6.25305 16.2949 6.47172 16.7172 6.8152 17.0238C7.15868 17.3304 7.60296 17.4999 8.06337 17.5H12.6027C13.0632 17.4999 13.5074 17.3304 13.8509 17.0238C14.1944 16.7172 14.4131 16.2949 14.4652 15.8375L15.6334 5.625H5.034L6.20087 15.8375ZM8.45837 7.8125C8.62413 7.8125 8.78311 7.87835 8.90032 7.99556C9.01753 8.11277 9.08337 8.27174 9.08337 8.4375V14.6875C9.08337 14.8533 9.01753 15.0122 8.90032 15.1294C8.78311 15.2467 8.62413 15.3125 8.45837 15.3125C8.29261 15.3125 8.13364 15.2467 8.01643 15.1294C7.89922 15.0122 7.83337 14.8533 7.83337 14.6875V8.4375C7.83337 8.27174 7.89922 8.11277 8.01643 7.99556C8.13364 7.87835 8.29261 7.8125 8.45837 7.8125ZM12.8334 8.4375C12.8334 8.27174 12.7675 8.11277 12.6503 7.99556C12.5331 7.87835 12.3741 7.8125 12.2084 7.8125C12.0426 7.8125 11.8836 7.87835 11.7664 7.99556C11.6492 8.11277 11.5834 8.27174 11.5834 8.4375V14.6875C11.5834 14.8533 11.6492 15.0122 11.7664 15.1294C11.8836 15.2467 12.0426 15.3125 12.2084 15.3125C12.3741 15.3125 12.5331 15.2467 12.6503 15.1294C12.7675 15.0122 12.8334 14.8533 12.8334 14.6875V8.4375Z"
                    fill="#0F2139"/>
                </svg>

              </div>

            </div>
            <p>{{ stakeholder.contact }}</p>
          </div>

        </div>
      }
    </div>

    <div class="stakeholders">
      <div class="header">
        <h3>Submissions</h3>
        <app-button [props]="AddButton" routerLink="/need-analysis/consultations/add-submission"/>
      </div>
      @if (!consultations.submissions) {
        <p>No submissions</p>
      } @else {
        <div class="all-stakeholders">
          <div *ngFor="let submission of consultations.submissions" class="stakeholder shadow">
            <div class="header">
              <p class="name">{{ submission.name }}</p>
              <div class="actions">
                <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M8.66669 3.33325H5.33335C4.89133 3.33325 4.4674 3.50885 4.15484 3.82141C3.84228 4.13397 3.66669 4.55789 3.66669 4.99992V14.9999C3.66669 15.4419 3.84228 15.8659 4.15484 16.1784C4.4674 16.491 4.89133 16.6666 5.33335 16.6666H15.3334C15.7754 16.6666 16.1993 16.491 16.5119 16.1784C16.8244 15.8659 17 15.4419 17 14.9999V11.6666M10.3334 9.99992L17 3.33325M17 3.33325V7.49992M17 3.33325H12.8334"
                    stroke="#0F2139" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M12.2534 4.03672L14.63 6.41339M6.16671 5.83339H3.66671C3.44569 5.83339 3.23373 5.92119 3.07745 6.07747C2.92117 6.23375 2.83337 6.44571 2.83337 6.66672V15.0001C2.83337 15.2211 2.92117 15.433 3.07745 15.5893C3.23373 15.7456 3.44569 15.8334 3.66671 15.8334H12.8334C13.0544 15.8334 13.2663 15.7456 13.4226 15.5893C13.5789 15.433 13.6667 15.2211 13.6667 15.0001V11.2501M15.6742 2.99172C15.8304 3.14781 15.9542 3.33313 16.0387 3.5371C16.1232 3.74107 16.1667 3.95969 16.1667 4.18047C16.1667 4.40126 16.1232 4.61988 16.0387 4.82384C15.9542 5.02781 15.8304 5.21313 15.6742 5.36922L9.97087 11.0726L7.00004 11.6667L7.59421 8.69589L13.2975 2.99256C13.4535 2.83634 13.6387 2.7124 13.8426 2.62784C14.0465 2.54328 14.2651 2.49976 14.4859 2.49976C14.7066 2.49976 14.9252 2.54328 15.1291 2.62784C15.333 2.7124 15.5182 2.83634 15.6742 2.99256V2.99172Z"
                    stroke="#0F2139" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M8.77087 4.0625V4.375H11.8959V4.0625C11.8959 3.6481 11.7313 3.25067 11.4382 2.95765C11.1452 2.66462 10.7478 2.5 10.3334 2.5C9.91897 2.5 9.52155 2.66462 9.22852 2.95765C8.93549 3.25067 8.77087 3.6481 8.77087 4.0625ZM7.52087 4.375V4.0625C7.52087 3.31658 7.81719 2.60121 8.34464 2.07376C8.87208 1.54632 9.58745 1.25 10.3334 1.25C11.0793 1.25 11.7947 1.54632 12.3221 2.07376C12.8496 2.60121 13.1459 3.31658 13.1459 4.0625V4.375H17.8334C17.9991 4.375 18.1581 4.44085 18.2753 4.55806C18.3925 4.67527 18.4584 4.83424 18.4584 5C18.4584 5.16576 18.3925 5.32473 18.2753 5.44194C18.1581 5.55915 17.9991 5.625 17.8334 5.625H16.8909L15.7084 15.98C15.6212 16.7426 15.2564 17.4465 14.6835 17.9573C14.1106 18.4682 13.3697 18.7504 12.6021 18.75H8.06462C7.29704 18.7504 6.55617 18.4682 5.98328 17.9573C5.4104 17.4465 5.04557 16.7426 4.95837 15.98L3.77587 5.625H2.83337C2.66761 5.625 2.50864 5.55915 2.39143 5.44194C2.27422 5.32473 2.20837 5.16576 2.20837 5C2.20837 4.83424 2.27422 4.67527 2.39143 4.55806C2.50864 4.44085 2.66761 4.375 2.83337 4.375H7.52087ZM6.20087 15.8375C6.25305 16.2949 6.47172 16.7172 6.8152 17.0238C7.15868 17.3304 7.60296 17.4999 8.06337 17.5H12.6027C13.0632 17.4999 13.5074 17.3304 13.8509 17.0238C14.1944 16.7172 14.4131 16.2949 14.4652 15.8375L15.6334 5.625H5.034L6.20087 15.8375ZM8.45837 7.8125C8.62413 7.8125 8.78311 7.87835 8.90032 7.99556C9.01753 8.11277 9.08337 8.27174 9.08337 8.4375V14.6875C9.08337 14.8533 9.01753 15.0122 8.90032 15.1294C8.78311 15.2467 8.62413 15.3125 8.45837 15.3125C8.29261 15.3125 8.13364 15.2467 8.01643 15.1294C7.89922 15.0122 7.83337 14.8533 7.83337 14.6875V8.4375C7.83337 8.27174 7.89922 8.11277 8.01643 7.99556C8.13364 7.87835 8.29261 7.8125 8.45837 7.8125ZM12.8334 8.4375C12.8334 8.27174 12.7675 8.11277 12.6503 7.99556C12.5331 7.87835 12.3741 7.8125 12.2084 7.8125C12.0426 7.8125 11.8836 7.87835 11.7664 7.99556C11.6492 8.11277 11.5834 8.27174 11.5834 8.4375V14.6875C11.5834 14.8533 11.6492 15.0122 11.7664 15.1294C11.8836 15.2467 12.0426 15.3125 12.2084 15.3125C12.3741 15.3125 12.5331 15.2467 12.6503 15.1294C12.7675 15.0122 12.8334 14.8533 12.8334 14.6875V8.4375Z"
                    fill="#0F2139"/>
                </svg>

              </div>

            </div>
            <p>{{ formatDate(submission.dateSubmitted) }}</p>
          </div>

        </div>
      }
    </div>

  }
</div>
